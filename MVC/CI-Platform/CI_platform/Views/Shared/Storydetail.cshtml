@using CI_platfom.Entity.ViewModel

@{
    ViewData["Title"] = "StoryDetail";
      Layout = "~/Views/Shared/_StoryLayout.cshtml";
}
@model StoryLandingPageVM
<style>
     .row {
        --bs-gutter-x: 0;
        --bs-gutter-y: 0;
    }

   
</style>
<body>

    <div class="container p-0">
        <div class="row p-0">
            <div class="col-lg-6 col-12 p-0 mt-4">
                <div class="container">
                
                            <img src="~/images/Grow-Trees-On-the-path-to-environment-sustainability-3.png" class="w-100 mission-mainimg" id="mainImg" />
                    <div class="row">
                        <div class="MultiCarousel" data-items="1,3,5,6" data-slide="1" id="MultiCarousel" data-interval="1000">
                            <div class="MultiCarousel-inner">
                              @*  @{

                                    //var missionDetailCaraImgCount=Model.AppliedMission.MissionMedia.Where(m=>m.MissionId==Model.AppliedMission.MissionId).Count();
                                    //var missionDetailCaraImg=Model.AppliedMission.MissionMedia.Where(m=>m.MissionId==Model.AppliedMission.MissionId);

                                    foreach(var missionDetailCaraImg in Model.AppliedMission.MissionMedia.Where(m=>m.MissionId==Model.AppliedMission.MissionId))

                                    {
                                        <div class="item ps-1 pe-1">
                                            <img src=@missionDetailCaraImg.MediaPath class="w-100 itemImg" />
                                        </div>
                                    }
                                }*@
                               <div class="item ps-1 pe-1">
                                    <img src="~/images/img1.png" class="w-100 itemImg" />
                                </div>
                                <div class="item ps-1 pe-1">
                                    <img src="~/images/Grow-Trees-On-the-path-to-environment-sustainability-3.png" class="w-100 itemImg" />
                                </div>
                                <div class="item ps-1 pe-1">
                                    <img src="~/images/img11.png" class="w-100 itemImg" />
                                </div>
                                <div class="item ps-1 pe-1">
                                    <img src="~/images/CSR-initiative-stands-for-Coffee--and-Farmer-Equity-3.png" class="w-100 itemImg" />
                                </div>
                                <div class="item ps-1 pe-1">
                                    <img src="~/images/img1.png" class="w-100 itemImg" />
                                </div>
                                <div class="item ps-1 pe-1">
                                    <img src="~/images/Grow-Trees-On-the-path-to-environment-sustainability-3.png" class="w-100 itemImg" />
                                </div>
                                <div class="item ps-1 pe-1">
                                    <img src="~/images/img11.png" class="w-100 itemImg" />
                                </div>

                            </div>
                            
                            <button class="btn btn-custom leftLst">  </button>
                            <button class="btn btn-custom rightLst">  </button>
                        </div>
                    </div>

                </div>


            </div>



            <div class="col-lg-6 col-12 mt-5">
                <div class="row px-5">
                    <h2>@Model.AppliedStory.Title</h2>
                      <img src=@Model.AppliedStory.User.Avatar alt="" class="volunteer-img">
                    <p>
                        @Model.AppliedStory.User.FirstName @Model.AppliedStory.User.LastName
                    </p>
                    <p>
                        @Model.AppliedStory.User.WhyIVolunteer
                    </p>
                    <div class="col-md-8 col">
                        <button class="header-btn px-5" style="height:50px"  data-bs-toggle="modal" data-bs-target="#coWorker1" type="button"><img src="~/images/heart1.png" style="margin-right: 20px;" class="flex align-items-center"/>Recommend to Co-Worker</button>
                    </div>
                    <div class="modal fade" id="coWorker1" tabindex="-1" aria-labelledby="coWorkerlLabel" aria-hidden="true">
                                <div class="modal-dialog modal-dialog-centered">
                                    <div class="modal-content overflow-scroll" style="max-height:500px">
                                        <div class="modal-header">
                                            <h5 class="modal-title" id="exampleModalLabel">Recommend To Your Co-Workers</h5>
                                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                        </div>
                                        <div class="modal-body">
                                            @foreach (var user in Model.UserList)
                                            {
                                                var torecommendeduser = Model.storyInvites.FirstOrDefault(m => (m.ToUserId == @user.UserId) && (m.FromUserId == @Model.LoggedUser.UserId) && (m.StoryId == @Model.AppliedStory.StoryId));
                                                <div class="d-flex justify-content-between mx-3 my-3">
                                                    <p>@user.FirstName @user.LastName @user.PhoneNumber</p>
                                                    @if (torecommendeduser == null)
                                                    {
                                                        <button class="recommend-story-btn btn btn-primary" data-story-id="@Model.AppliedStory.StoryId"  data-mission-id="@Model.AppliedStory.Mission.MissionId" data-fromuser-id="@Model.LoggedUser.UserId" data-touser-id="@user.UserId">Recommend</button>
                                                    }
                                                    else
                                                    {
                                                        <button class="recommend-story-btn btn btn-success" data-story-id="@Model.AppliedStory.StoryId"  data-mission-id="@Model.AppliedStory.Mission.MissionId"  data-fromuser-id="@Model.LoggedUser.UserId" data-touser-id="@user.UserId">Recommended</button>
                                                    }

                                                </div>
                                            }
                                        </div>

                                    </div>
                                </div>
                            </div>
                    <div class="col-md-4 col">
                                  <form method="post" asp-controller="Mission" asp-action="MissionDetail" asp-route-missionId="@Model.AppliedStory.MissionId" asp-route-themeId="@Model.AppliedStory.Mission.ThemeId" asp-route-cityId="@Model.AppliedStory.Mission.CityId" asp-route-countryId="@Model.AppliedStory.Mission.CountryId">
                                
                                   <input type="hidden" name="missionId" value="@Model.AppliedStory.MissionId-"/>
                                    <button class="submit-btn">
                            Open Mission 
                           <img src="~/images/right-arrow.png">
                        </button>
                            </form>
                    </div>
                   
                </div>
            </div>
        </div>

        <div class="row mt-5" style="height:100%">
            <div class="col-xl-8 col-12">
                <ul class="nav nav-tabs" id="myTab" role="tablist">
                    <li class="nav-item" role="presentation">
                        <button class="nav-link active" id="mission-tab" data-bs-toggle="tab" data-bs-target="#home" type="button" role="tab" aria-controls="home" aria-selected="true">@Model.AppliedStory.Title</button>
                    </li>
                </ul>
                <div class="tab-content" id="myTabContent">
                    <div class="tab-pane fade show active mt-3 px-3" id="home" role="tabpanel" aria-labelledby="mission-tab">
                        <h3>@Model.AppliedStory.Title</h3>
                        <p style="font-size:15px">
                            @Model.AppliedStory.Description
                            <br>
                            <br>

                            <br>
                            <br>
                       
                        </p>
                        
                       
                    </div>
                   
                    
                </div>

            </div>

          
        </div>
    </div>


    <hr />

    <div class="container mb-3">
        <a asp-action="PrivacyPolicy" asp-controller="Mission">Privacy Policy</a>
    </div>

</body>



